# Boost 升压电路的原理

## 前言

本文为DC-DC开关电源Boost电路原理的学习文档，包括电路拓扑图的分析，数学公式讲解以及实际电路设计时的要点。希望读者在学习中能有所收获

作者比较🥦，文档内容涵盖或许不够全面，如有专业性错误还请读者见谅并指出，谢谢🙏

免责声明：内容来源于本人学习总结和各种学习资源，如有侵权可及时联系作者

| version | author |  date  | statement |
| :-----: | :----: | :----: | :-------: |
|  V 1.0  | Q.Z.Q  | 2023.6 |     /     |

+++

+++

## 电路拓扑

电路拓扑如下

![](https://pic.imgdb.cn/item/649062461ddac507ccba3b80.jpg)

上图是

### **基本原理**

上图中MOS管就是一个开关，只要开关速度够快（即开关频率够高），控制好导通与关断时间（即充放电时间），配合输出滤波电容，就可以得到基本稳定的 V~o~（即输出电压）了。

#### 过程分析

1. MOS管导通时

电路状态如下

![](https://pic.imgdb.cn/item/649063431ddac507ccbc2932.jpg)

在开关导通的时候，电感 L 接地，二极管截止，V~i~ 对电感L进行充电，电感两端电压是V~i~ 电流方向如上图箭头所示

2. MOS管截止时

电路状态如下

![](https://pic.imgdb.cn/item/649064f61ddac507ccbfaa4b.jpg)

在开关变为不导通的时候，由于电感两端电流不能突变，方向继续从左向右（如上图所示）所以会感应出电压，让右侧的二极管导通。
当输出电压V~o~ 恒定时，二极管导通压降为 V~d~，所以电感右端电压为 V~o~+ V~d~ > Vi，电感此时放电，给负载供电并且给输出滤波电容充电

我们知道电感上电压的计算公式有
$$
U_L=L{d_i\over d_t}
$$
现在我们规定从左往右是电流/电压的正方向

- 当MOS开关导通，电感两端电压稳定时

$$
U_L=L{d_i\over d_t}=V_i
$$

**说明电感上电流变化率 ${d_i\over d_t}$ 是个定值（且大于0），即说明电感上通过的电流时线性变化（增加）的**

- 当MOS开关截止，电感两端电压稳定时

$$
U_L=L{d_i\over d_t}=V_i-(V_o+V_d)
$$

**同理，电感上电流变化率 ${d_i\over d_t}$ 是个定值（但小于0），即说明电感上通过的电流时线性变化（减小）的**

并且整个电路稳定之后，因为负载电流恒定，那么一个周期时间之内，在开关导通时电感电流增加的量要等于开关截止时电感电流减小的量，即电感充了多少电就要放多少电，不然负载的电流或者电压就要发生变化

**即一个周期内，电感上流经电流的增大量等于减小量（这个结论我们后面会用用到）**

所以理论上电感流经的电流波形如下

![](https://pic.imgdb.cn/item/649076da1ddac507ccdf317a.jpg)

为什么是理论呢？因为前面的分析有一个前提，电感值不变的前提下，上述结论才会成立。但实际上电流大到一定程度的时候，电感量L会随电流的增大而减小，所以会有电感饱和电流这一说（详情可参考《认识元器件中》的电感一节）

**所以我们要求电感的峰值电流不能超过电感的饱和电流**

（额外开个小灶）倘若很不幸，我们在选型的时候，选的电感饱和电流太小了；开关导通，电感电流增大，增大到饱和电流的时候，那么L会快速减小，意味着 di/dt=U/L 快速增大，即电感电流随时间更快的增大；电流更大了，那么进一步电感感量L更小了，di/dt 更更更大了，电流又更更更大了。简单画个图，体现一下

![](https://pic.imgdb.cn/item/6491b23a1ddac507cc7b7aec.jpg)

看到这里，恭喜你已经能够理解Boost电路中电感上流经电流的波形是什么样子（为什么是直线变化）了吧；下图给出的是Boost电路各处电压/电流的波形，想必读者在学习完上部分内容后能迅速理解下图各波形

![](https://pic.imgdb.cn/item/6491c72e1ddac507cc9c952c.jpg)

## 公式推导与理解

推导电路中数学公式为的是元器件更好的选型，读者不用担心记不住理解不了怎么办，从应用角度来谈，元器件的选型公式我们在选择的DC-DC电源芯片的datasheet中能够查询到，选型参数的计算也只是带数值摁计算机的事情；但读者想拥有扎实的硬件基础的话，还是建议作者花时间和精力学习并消化本部分内容

### **Boost伏秒平衡法则**

前面我们分析知道，在一个MOS开关导通闭合周期内，电感上流经电流的增大量等于减小量；在理论上电感感值不变的前提下，我们将电感在MOS管导通和截止两个状态下列出两个等式组成方程组（在这里我们不考虑参考方向问题，只考虑电感上电压的大小）

我们记

- 导通时间为	T~on~
- 截止时间为	T~off~
- 周期				T = T~on~ + T~off~ = 1/f

有
$$
\begin{cases}
	导通时：L{d_i\over d_t}=|V_i|
	\\
	截止时：L{d_i\over d_t}=|V_i-(V_o+V_d)|
\end{cases}
$$
对等式做定积分有(注意：这里的电感感值和电压都是常量)
$$
\begin{cases}
	导通时：L\int _{0} ^{T_{on}} {d_i\over d_t}dt=|V_i| \int _{0} ^{T_{on}} {1}dt
	\\
	截止时：L\int _{0} ^{T_{off}} {{d_i\over d_t}}dt=|V_i-(V_o+V_d）|\int _{0} ^{T_{off}} {1}dt
\end{cases}
$$
化简
$$
\begin{cases}
	导通时：L*\triangle I=|V_i| *T_{on}
	\\
	截止时：L*\triangle I=|V_i-(V_o+V_d)|*T_{off}
\end{cases}
$$
由等式关系，我们有
$$
V_i *T_{on}=|V_i-(V_o+V_d)|*T_{off}=\{(V_o+V_d)-V_i\}*T_{off}
$$
这就是Boost电路中的伏秒平衡法则

### **元器件参数选型公式**

**进入学习前要强调一件事，以下内容均为理论推导，实际运用时可能优惠有所偏差，希望读者在设计与测试时按实际情况进行调整 ！！！**

进行公式推导前，我们要明确我们计算的公式中有哪些是我们的已知量，哪些是未知量需要我们求的（主次矛盾要拎清）

如下图所示

**![](https://pic.imgdb.cn/item/649506c81ddac507cc0a9495.jpg)**

PS：输入输出的电流电压以及开关频率都是我们根据自己设计需求来设定的，这很好理解；这里解释一下输入输出纹波是怎么一回事。开关电源的纹波主要来源于两个地方，一个是电源输入端的（低频）纹波，另一个是由于高频开关带来的（高频纹波）【注意：电源纹波和电源噪声不可以混为一谈，它们两者组成成分以及现象各不相同】

详情可以参考文章[纹波电压和纹波电流是什么？]([(4 封私信 / 26 条消息) 纹波电压和纹波电流是什么？ - 知乎 (zhihu.com)](https://www.zhihu.com/question/267081497))

#### 导通/截止时间与占空比

前面我们推导出了Boost电路的伏秒平衡法则
$$
V_i *T_{on}=\{(V_o+V_d)-V_i\}*T_{off}
$$
并且我们知道 $T=T_{on}+T_{off}={1\over f}$

对等式经行稍微变形，我们可以得出
$$
\begin{cases}
	导通时间：T_{on}=(1-{V_{i}\over V_o+V_d})*{1\over f}
	\\
	截止时间：T_{off}={V_{i}\over V_o+V_d}*{1\over f}
	\\
	占空比：D={T_{on}\over T}=1-{V_{i}\over V_o+V_d}
\end{cases}
$$
我们可以看出：**占空比只与输出输出电压有关，和其他量均无关**

#### 电感

##### 电感平均电流

而电感平均电流我们知道需要从电感上功率的角度出发计算，结合我们的电路拓扑图

![](https://pic.imgdb.cn/item/649517fb1ddac507cc264cd2.jpg)

- 电感输入端功率 

从Boost电路拓扑来看，输入端所有的电流都会流经电感，我们有电感输入端功率 $P_i=V_i*I_L$

- 电感输出端功率

假设**忽略电路其他微小的损耗（导线、MOS管漏电流等），二极管和负载上的功率占输出功率的主要部分**，所以我们有电感输出端功率 $P_o=(V_o+V_d)*I_o$

由能量守恒我们知道

$P_i=V_i*I_L=P_o=(V_o+V_d)*I_o$

所以我们有电感平均电流
$$
I_L={V_o+V_d\over V_i}*I_o
$$

##### 电感纹波电流

从前面知道，电感电流就是个三角波，在开关导通时电感电流增大，在关断时，电感电流减小。那纹波电流的大小就等于在开关导通时电感电流增大的值，也等于关断时电感电流减小的值。我们就计算一个周期导通时间电感电流的增加量即可知道电感纹波电流的大小
$$
根据~U=L{di\over dt}
\\
有~V_i\int _0 ^{T_{on}}1dt=L\int _0 ^{T_{on}}{di\over dt}dt
\\
即~L*\triangle I_L=V_i *T_{on}~有~\triangle I_L={V_i*T_{on}\over L}
\\
代入~T_{on}=(1-{V_{i}\over V_o+V_d})*{1\over f}
\\
\triangle I_L={V_i\over f*L}*(1-{V_i\over V_o+V_d})
$$
从中可以看出**电感电流的纹波和输出电流（负载电流）大小无关**

##### **电感的峰值电流**

电感的峰值电流计算公式有：
$$
I_{LP}=I_o+{\triangle I_L\over2}
$$
**电感选型时，电感的饱和电流必须大于这个 I~Lp~ ，并且要留一定的裕量**

##### **电感感值**

一般来说，让电感的纹波电流 $\triangle I_L$ 等于电感平均电流的$ 			20\%\sim40\% $之间即 $\triangle I_L=(0.2\sim0.4)*I_L$

![](https://pic.imgdb.cn/item/649512071ddac507cc1dee4c.jpg)

结合上面的推导我们有
$$
\begin{cases}
	电感平均电流:I_L={V_o+V_d\over V_i}*I_o
	\\
	电感纹波电流:\triangle I_L={V_i\over f*L}*(1-{V_i\over V_o+V_d})
	\\
	电流关系:\triangle I_L=(0.2\sim0.4)*I_L
\end{cases}
$$
所以我们可以得出**电感感值范围**
$$
L={V_i\over (0.2\sim0.4)*f*I_o}*(1-{V_i\over V_o+V_d})*{V_i\over V_o+V_d}
$$
那么电感感值如果过小或者过大会有什么影响呢？

当我们确定了输入输出电压，那么电感两端的电压就是固定的，那么电感电流变化斜率与电感感量成反比，电感越大，斜率越小

- 如果电感感量过小，那么电感纹波电流会比较大，即流过电感电流的峰值会很高，电感饱和电流就要很高。如此同时，过大的电流，在开关切换时，会导致 EMI 问题会更加明显


- 如果电感感量过大，那么电感电流纹波会比较小，会导致动态响应变差


（动态响应指的是：电路在负载发生变化的时候，输出为满足设计需求前提下适应负载变化响应的能力。

举个例子：就比如输出一直是1A的电流，某个时刻，负载从需要 1A的电流变成突然需要 5A的电流。这个时候如果电感过大，电感电流充上来需要较长时间，那么电感电流需要很多个开关周期才能升到 5A，这期间负载所需要的 5A 电流主要来源于输出滤波电容的放电，会导致输出电压跌落比较多，有可能出现故障。）

<img src="https://pic.imgdb.cn/item/649554831ddac507cc991ecc.jpg">

#### 输入电容

说到电容，相信大家第一反应就是滤波，说**输入电容有滤波的作用**也没有错；但是除此之外，输入电容还有一个作用：**提供瞬态电流需求**

实际设计中，难免会出现输入电源离Boost系统距离较远的情况，此时我们因为较长的走线而产生的寄生电感（这个我们后续会讲）；而我们知道电感的存在，会对电流产生了滞后的作用，也就说明了为什么实际输入电源为什么不能快速反应的原因

说多了一点，但我们也不能因为输入电源靠近Boost系统就可以忽略输入电容的提供瞬态电流的作用，因为实际设计中，我们是无法控制实际生产中走线电感的大小，最坏的情况就是输入的瞬时电流完全需要输入电容提供，当然，我们按这种情况设计的电路就能满足所有的情况，下面我们正式进入计算环节

类比电感，应该可以理解**输入电容是控制输入电压纹波大小**的主要因素（不理解没关系，记住就好了），而**输入电压纹波主要分为两部分：一部分是电容充放电时，电容储存的电荷量的变化导致了电容上电压的变化（高中物理学过的电容定义式 $Q=C*U_C$ ）；另一部分是电容等效串联电阻ESR，电容充放电过程中有电流流过，则这部分也会产生一部分压降，我们记为 U~ESR~** 

所以输入电压纹波有
$$
\triangle V_i=U_C+U_{ESR}
$$

##### 因电荷产生的电压纹波

如下图，通过基尔霍夫电流定律，节点电流和为 0，并且（理想情况下）电源输入的电流恒定，那么当电感电流的变化量必然等于电容电流的变化量，因为最终三者的和为 0

<img src="https://pic.imgdb.cn/item/6495b26f1ddac507cc412b2a.jpg">

三者电流波形如下

<img src="https://pic.imgdb.cn/item/6495b2d11ddac507cc41d0fd.jpg">

可以看见，**输入电容充放电时间是一样的，各占周期的一半**

高中物理我们知道，电流是单位时间流过的电荷量，即 $Q=I*T$ 上了大学无非就是变成了积分，而积分在图像中的几何意义就是函数图像在特定区域的面积。所以输入电容上电荷总的变化量就是上图带颜色区域的面积

且已知三角形高是 $\triangle I_L\over 2$ 底是 $T\over2$ 

有
$$
U_C={Q\over C_i}={{1\over2}*{\triangle I_L\over 2}*{T\over2}\over C_i}
\\
={V_i\over8*f^2*L*C_i}*({1-{V_i\over V_o+V_d}})
$$

##### 因ESR产生的电压纹波

前面波形图知道，电容的充电电流最大是 $\triangle I_L\over2$ ，放电电流最大就是 $-{\triangle I_L\over2}$ ，负号表示电流方向相反，引起的压降的电压也是相反的

我们有
$$
U_{ESR}={\triangle I_L\over2}*ESR-(-{\triangle I_L\over2})*ESR
\\=\triangle I_L*ESR
\\={V_i\over f*L}*({1-{V_i\over V_o+V_d}})*ESR
$$

##### **输入电容容值**

综上我们知道
$$
\triangle V_i=U_C+U_{ESR}
\\={V_i\over f*L}*({1-{V_i\over V_o+V_d}})*(ESR+{1\over 8*f*C_i})
$$
考虑到我们的电容实际使用情况

- 陶瓷电容 ESR 小，容量小，U~C~ 对纹波起决定作用，所以可以近似 $\triangle V_i=U_C$

$$
陶瓷电容:C_i≥{V_i\over8*f^2*L*\triangle V_i}*({1-{V_i\over V_o+V_d}})
$$

- 铝电解电容ESR大，容量大，U~ESR~ 对纹波起决定作用，所以可以近似 $\triangle V_i=U_{ESR}$

$$
铝电解电容:ESR\le {\triangle V_i*f*L\over V_i}*{V_o+V_d\over V_o+V_d-V_i}
$$

#### 输出电容

**输出电容的作用与输入电容类似，主要也是滤波和提供瞬时电流**

与输入电容类似，**输出电容控制着输出电压纹波大小，同样输出电压纹波也主要由电容电荷引起的纹波、ESR引起的电压纹波两部分构成**

并且，相比输入纹波，我们更关心输出纹波的大小

##### 因电荷产生的电压纹波

一个周期内，电容的充电电荷量和放电电荷量必然一样，我们计算出其中一个就行了。显然，放电时更好计算，输出电流完全由输出电容提供且（我们设计的预想）恒定为 I~o~

<img src="https://pic.imgdb.cn/item/6495c1601ddac507cc5bcd3a.jpg">

则输出电容电荷变化总量有
$$
Q=I_o*T_{on}=U_C*C_o
$$
所以
$$
U_C={Q\over C_o}={I_o*T_{on}\over C_o}
\\={I_o\over f*Co}*(1-{V_i\over V_o+V_d})
$$

##### 因ESR产生的电压纹波

我们先分析一下输出电容一个充放电周期其流经的电流状态

- 开关导通

输出电流完全由输出电容提供，大小为 I~o~

- 开关从导通变为截止瞬间

此时流经电感上的电流达到最大，大小为平均电流加上一半的输入电流纹波 $I_L+{\triangle I_L\over2}$ 。切换瞬间，电感上的电流一部分提供输出电流，一部分给输出电容充电；基尔霍夫电流定律告诉我们，流经输出电容的电流大小是电感电流减去输出电流 $I_L+{\triangle I_L\over2}-I_o$

- 开关截止

随着电感电流逐渐减小，为保持输出电流保持 I~o~ 不变，向输出电容流向的电流逐渐减小

所以我们有输出电容充放电时电流波形，如图

![](https://pic.imgdb.cn/item/6495c3451ddac507cc5ea519.jpg)

所以我们有
$$
U_{ESR}={(I_L+{\triangle I_L\over2}-I_o)}*ESR-(-I_o)*ESR
\\={(I_L+{\triangle I_L\over2})}*ESR
\\=({V_i\over 2*f*L}*({1-{V_i\over V_o+V_d}})+{V_o+V_d\over V_i}*I_o)*ESR
$$

##### **输出电容容值**

综上，我们有
$$
\triangle V_o=U_C+U_{ESR}
\\
={I_o\over f*Co}*(1-{V_i\over V_o+V_d})+
\\
({V_i\over 2*f*L}*({1-{V_i\over V_o+V_d}})+
\\
{V_o+V_d\over V_i}*I_o)*ESR
$$
同样考虑到我们的电容实际使用情况
$$
陶瓷电容:C_i≥{I_o\over f*\triangle V_o}*({1-{V_i\over V_o+V_d}})
$$

$$
铝电解电容:ESR\le {\triangle V_o\over {V_o+V_d\over V_i}*I_o+{V_i\over 2*f*L}*(1-{V_i\over V_o+V_d})}
$$

## **PCB布局布线细节**

### 基本原则：

- **优先参照datasheet中推荐布局与layout要求**
- **尽量在一层走完线，保留一块完整的地平面**

### 芯片引脚设计：

- **输入电容 C~i~ 小容量靠近芯片，大容量远离芯片**
- **输出电容 C~o~ 大容量靠近芯片，小容量远离芯片**

- FB（反馈）距离SW远点，**输出信号经过输出电容后再经过反馈回路，反馈节点回流芯片的信号线要短且细，地远离输入电容的地（可通过打地孔圈地的形式减少干扰）**
- **所有模拟地AGND接在一起后在单点接入功率地PGND**
- 小信号地连一起 (FB分压电阻，COMP，SS) 然后再与PGND单点相连，或者通过过孔连到背面
- **电感尽量采用一体成型屏蔽电感**
- 电感两个引脚间距离尽可能大一些，非一体成型电感最好把电感地下的铜挖空，还要让敏感电路和回路远离电感。特别是VO到FB的走线，特别要避开电感和二极管，**不能和电感平行**
- 优先四层板设计，尽可能提高PCB散热

### 抑制高频干扰：

MOS管导通，电流走过红色线，MOS管关闭电流走蓝色线，只有一条线的支路电流是断续的，这条**支路电流会突变，含有高频分量**，绿色框的回路面积与自感成正比，**设计PCB的时候，我们要使得绿色框面积最小**，如下图

![](https://pic.imgdb.cn/item/6496afd81ddac507cc833f65.jpg)

如何使得面积最小？

- 输出电容的地靠近芯片的地
- 二极管阳极靠近芯片SW引脚（例子中没有）

### EMI设计

EMI主要以两种方式干扰电路，分别是：传导耦合和辐射耦合；抑制措施如下

- 传导EMI：添加 $\pi$LC 滤波电路；输入使用电感输出使用磁珠滤除高频干扰
- 辐射EMI：优化布局，减少 $di\over dt$ 回路，使干扰信号被地平面吸收

## 公式汇总

![](https://pic.imgdb.cn/item/649d9bb61ddac507cce61395.jpg)

![](https://pic.imgdb.cn/item/649d9bc71ddac507cce62aa7.jpg)

## 结束语

关于Boost电路的理论学习到这里就暂时结束了，虽然大部分都是理想情况下元器件的电路分析，实际运用上会有大量寄生参数等不良影响导致结果与理论分析相差很远；

虽然上述推导的公式不能直接套用，但是经过理论的学习我们能大致明白电路在工作时的各元器件的工作状态与工作原理，对我们在后续电路测试与维护中有不可忽视的作用。但重要的还是多实践多积累，少点眼高手低纸上谈兵！

Boost电路模块作者接触较少，所以没有什么例子可举，若后续有补充会及时更新🕊🕊🕊

